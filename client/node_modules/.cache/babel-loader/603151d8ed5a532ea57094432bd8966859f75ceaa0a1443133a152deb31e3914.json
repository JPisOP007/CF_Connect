{"ast":null,"code":"import React from'react';import{Navigate,useLocation}from'react-router-dom';import{useAuth}from'../../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children,roles=[]}=_ref;const{isAuthenticated,user,loading}=useAuth();const location=useLocation();// Show loading spinner while checking authentication\nif(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"})});}// Redirect to login if not authenticated\nif(!isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",state:{from:location},replace:true});}// Check role-based access\nif(roles.length>0&&!roles.includes(user===null||user===void 0?void 0:user.role)){return/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-red-600 mb-4\",children:\"Access Denied\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"You don't have permission to access this page.\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"Required role(s): \",roles.join(', ')]})]})})});}return children;};export default ProtectedRoute;","map":{"version":3,"names":["React","Navigate","useLocation","useAuth","jsx","_jsx","jsxs","_jsxs","ProtectedRoute","_ref","children","roles","isAuthenticated","user","loading","location","className","to","state","from","replace","length","includes","role","join"],"sources":["C:/Users/sjaya/CF_Connect/client/src/components/common/ProtectedRoute.js"],"sourcesContent":["import React from 'react';\r\nimport { Navigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../../context/AuthContext';\r\n\r\nconst ProtectedRoute = ({ children, roles = [] }) => {\r\n  const { isAuthenticated, user, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  // Show loading spinner while checking authentication\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"spinner\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Redirect to login if not authenticated\r\n  if (!isAuthenticated) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  // Check role-based access\r\n  if (roles.length > 0 && !roles.includes(user?.role)) {\r\n    return (\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <div className=\"card\">\r\n          <div className=\"card-body text-center\">\r\n            <h2 className=\"text-2xl font-bold text-red-600 mb-4\">Access Denied</h2>\r\n            <p className=\"text-gray-600 mb-4\">\r\n              You don't have permission to access this page.\r\n            </p>\r\n            <p className=\"text-sm text-gray-500\">\r\n              Required role(s): {roles.join(', ')}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\nexport default ProtectedRoute;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,CAAEC,WAAW,KAAQ,kBAAkB,CACxD,OAASC,OAAO,KAAQ,2BAA2B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpD,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAA8B,IAA7B,CAAEC,QAAQ,CAAEC,KAAK,CAAG,EAAG,CAAC,CAAAF,IAAA,CAC9C,KAAM,CAAEG,eAAe,CAAEC,IAAI,CAAEC,OAAQ,CAAC,CAAGX,OAAO,CAAC,CAAC,CACpD,KAAM,CAAAY,QAAQ,CAAGb,WAAW,CAAC,CAAC,CAE9B;AACA,GAAIY,OAAO,CAAE,CACX,mBACET,IAAA,QAAKW,SAAS,CAAC,+CAA+C,CAAAN,QAAA,cAC5DL,IAAA,QAAKW,SAAS,CAAC,SAAS,CAAM,CAAC,CAC5B,CAAC,CAEV,CAEA;AACA,GAAI,CAACJ,eAAe,CAAE,CACpB,mBAAOP,IAAA,CAACJ,QAAQ,EAACgB,EAAE,CAAC,QAAQ,CAACC,KAAK,CAAE,CAAEC,IAAI,CAAEJ,QAAS,CAAE,CAACK,OAAO,MAAE,CAAC,CACpE,CAEA;AACA,GAAIT,KAAK,CAACU,MAAM,CAAG,CAAC,EAAI,CAACV,KAAK,CAACW,QAAQ,CAACT,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEU,IAAI,CAAC,CAAE,CACnD,mBACElB,IAAA,QAAKW,SAAS,CAAC,6BAA6B,CAAAN,QAAA,cAC1CL,IAAA,QAAKW,SAAS,CAAC,MAAM,CAAAN,QAAA,cACnBH,KAAA,QAAKS,SAAS,CAAC,uBAAuB,CAAAN,QAAA,eACpCL,IAAA,OAAIW,SAAS,CAAC,sCAAsC,CAAAN,QAAA,CAAC,eAAa,CAAI,CAAC,cACvEL,IAAA,MAAGW,SAAS,CAAC,oBAAoB,CAAAN,QAAA,CAAC,gDAElC,CAAG,CAAC,cACJH,KAAA,MAAGS,SAAS,CAAC,uBAAuB,CAAAN,QAAA,EAAC,oBACjB,CAACC,KAAK,CAACa,IAAI,CAAC,IAAI,CAAC,EAClC,CAAC,EACD,CAAC,CACH,CAAC,CACH,CAAC,CAEV,CAEA,MAAO,CAAAd,QAAQ,CACjB,CAAC,CAED,cAAe,CAAAF,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}